---
layout: post
title: XAML Schema Language
date: 2008-11-16 17:57:22.000000000 +05:00
type: post
published: true
status: publish
categories:
- WF
tags: []
meta:
  _oembed_c3b64914f98f13125d205ff68ee16c59: '{{unknown}}'
  _oembed_cfccdc5a90925c37e45804b2979a96c8: '{{unknown}}'
author:
  login: zamd
  email: zulfiqar.ahmed@gmail.com
  display_name: zamd
  first_name: ''
  last_name: ''
---
<div class="Section1">
<p class="MsoNormal">As mentioned in <a href="http://www.zamd.net/2008/11/03/WhatsNewInWFV40.aspx">previous post</a> WF v4.0 is enhanced in many ways and one of those is &#8220;Complete workflow/activity authoring in XAML&#8221;.</p>
<p class="MsoNormal">A key enhancement to support this feature is the addition of Schema support in XAML. While &nbsp;XAML is used to represent objects but there was no way to specify type information in XAML. Schema support provides exactly this functionality using XAML vocabulary. Let&#8217;s explore this feature. In the &nbsp;PDC bits XAML Schema functionality is available in <b>System.XAML.Runtime.dll</b> assembly in (<b>System.Runtime.Xaml.Schema</b>) namespace.</p>
<p class="MsoNormal">Let&#8217;s create a simple type in c#. </p>
<p class="MsoNormal" style="margin-left:36pt;"><span style="font-size:10pt;font-family:\"Courier New\";color:blue;">public</span><span style="font-size:10pt;font-family:\"Courier New\";"> <span style="color:blue;">class</span> <span style="color:#2B91AF;">Employee</span></span></p>
<p class="MsoNormal" style="margin-left:36pt;"><span style="font-size:10pt;font-family:\"Courier New\";">{</span></p>
<p class="MsoNormal" style="margin-left:36pt;"><span style="font-size:10pt;font-family:\"Courier New\";">&nbsp;&nbsp;&nbsp; <span style="color:blue;">public</span> <span style="color:blue;">string</span> Email { <span style="color:blue;">get</span>; <span style="color:blue;">set</span>; }</span></p>
<p class="MsoNormal" style="margin-left:36pt;"><span style="font-size:10pt;font-family:\"Courier New\";">&nbsp;&nbsp;&nbsp; <span style="color:blue;">public</span> <span style="color:blue;">bool</span> SendEmail() { <span style="color:blue;">return</span> <span style="color:blue;">true</span>; }</span></p>
<p class="MsoNormal" style="margin-left:36pt;"><span style="font-size:10pt;font-family:\"Courier New\";">&nbsp;&nbsp;&nbsp; <span style="color:blue;">public</span> <span style="color:blue;">event</span> <span style="color:#2B91AF;">EventHandler</span> NewMessage;</span></p>
<p class="MsoNormal" style="margin-left:36pt;"><span style="font-size:10pt;font-family:\"Courier New\";">}</span></p>
<p class="MsoNormal">Now this same type can be created in XAML using XAML Schema language. But here I will use a slightly different approach and will convert above type to its XAML schema representation using following simple code.</p>
<p class="MsoNormal" style="margin-left:36pt;"><span style="font-size:10pt;font-family:\"Courier New\";color:blue;">static</span><span style="font-size:10pt;font-family:\"Courier New\";"> <span style="color:blue;">void</span> Main(<span style="color:blue;">string</span>[] args)</span></p>
<p class="MsoNormal" style="margin-left:36pt;"><span style="font-size:10pt;font-family:\"Courier New\";">{</span></p>
<p class="MsoListParagraph" style="margin-left:72pt;text-indent:-18pt;"><span style="font-size:10pt;font-family:\"Courier New\";"><span>1.<span style="font:7pt \"Times New Roman\";">&nbsp; </span></span></span><span style="font-size:10pt;font-family:\"Courier New\";color:blue;">var</span><span style="font-size:10pt;font-family:\"Courier New\";"> resolver = <span style="color:blue;">new</span> <span style="color:#2B91AF;">XamlSchemaTypeResolver</span>();</span></p>
<p class="MsoListParagraph" style="margin-left:72pt;text-indent:-18pt;"><span style="font-size:10pt;font-family:\"Courier New\";"><span>2.<span style="font:7pt \"Times New Roman\";">&nbsp; </span></span></span><span style="font-size:10pt;font-family:\"Courier New\";color:#2B91AF;">SchemaType</span><span style="font-size:10pt;font-family:\"Courier New\";"> st =resolver.GenerateSchemaTypes(<span style="color:#2B91AF;">Assembly</span>.GetExecutingAssembly()).First();</span></p>
<p class="MsoListParagraph" style="margin-left:72pt;text-indent:-18pt;"><span style="font-size:10pt;font-family:\"Courier New\";"><span>3.<span style="font:7pt \"Times New Roman\";">&nbsp; </span></span></span><span style="font-size:10pt;font-family:\"Courier New\";color:blue;">string</span><span style="font-size:10pt;font-family:\"Courier New\";"> xaml = <span style="color:#2B91AF;">XamlServices</span>.Save(st);</span></p>
<p class="MsoNormal" style="margin-left:36pt;"><span style="font-size:10pt;font-family:\"Courier New\";">}</span></p>
<p class="MsoNormal">What I get back is this:</p>
<p class="MsoNormal" style="margin-left:36pt;"><span style="font-size:10pt;font-family:\"Courier New\";color:blue;">&lt;</span><span style="font-size:10pt;font-family:\"Courier New\";color:#A31515;">p:<span style="background:yellow;">SchemaType</span></span><span style="font-size:10pt;font-family:\"Courier New\";color:blue;"> </span><span style="font-size:10pt;font-family:\"Courier New\";color:red;">BaseType</span><span style="font-size:10pt;font-family:\"Courier New\";color:blue;">=</span><span style="font-size:10pt;font-family:\"Courier New\";">&quot;<span style="color:blue;">p:Object</span>&quot;<span style="color:blue;"> </span><span style="color:red;">Name</span><span style="color:blue;">=</span>&quot;<span style="color:blue;">p1:Employee</span>&quot;<span style="color:blue;"> </span></span></p>
<p class="MsoNormal" style="margin-left:36pt;"><span style="font-size:10pt;font-family:\"Courier New\";color:blue;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:10pt;font-family:\"Courier New\";color:red;">xmlns:p</span><span style="font-size:10pt;font-family:\"Courier New\";color:blue;">=</span><span style="font-size:10pt;font-family:\"Courier New\";">&quot;<span style="color:blue;background:yellow;">http://schemas.microsoft.com/netfx/2008/xaml/schema</span>&quot;<span style="color:blue;"> </span></span></p>
<p class="MsoNormal" style="margin-left:36pt;"><span style="font-size:10pt;font-family:\"Courier New\";color:blue;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:10pt;font-family:\"Courier New\";color:red;">xmlns:s</span><span style="font-size:10pt;font-family:\"Courier New\";color:blue;">=</span><span style="font-size:10pt;font-family:\"Courier New\";">&quot;<span style="color:blue;">clr-namespace:System;assembly=mscorlib</span>&quot;<span style="color:blue;"> </span></span></p>
<p class="MsoNormal" style="margin-left:36pt;"><span style="font-size:10pt;font-family:\"Courier New\";color:blue;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:10pt;font-family:\"Courier New\";color:red;">xmlns:x</span><span style="font-size:10pt;font-family:\"Courier New\";color:blue;">=</span><span style="font-size:10pt;font-family:\"Courier New\";">&quot;<span style="color:blue;">http://schemas.microsoft.com/winfx/2006/xaml</span>&quot;<span style="color:blue;">&gt;</span></span></p>
<p class="MsoNormal" style="margin-left:36pt;"><span style="font-size:10pt;font-family:\"Courier New\";color:blue;">&nbsp; &lt;</span><span style="font-size:10pt;font-family:\"Courier New\";color:#A31515;">p:<span style="background:yellow;">SchemaProperty</span></span><span style="font-size:10pt;font-family:\"Courier New\";color:blue;"> </span><span style="font-size:10pt;font-family:\"Courier New\";color:red;">Name</span><span style="font-size:10pt;font-family:\"Courier New\";color:blue;">=</span><span style="font-size:10pt;font-family:\"Courier New\";">&quot;<span style="color:blue;">Email</span>&quot;<span style="color:blue;"> </span><span style="color:red;">Type</span><span style="color:blue;">=</span>&quot;<span style="color:blue;">p:String</span>&quot;<span style="color:blue;"> /&gt;</span></span></p>
<p class="MsoNormal" style="margin-left:36pt;"><span style="font-size:10pt;font-family:\"Courier New\";color:blue;">&nbsp; &lt;</span><span style="font-size:10pt;font-family:\"Courier New\";color:#A31515;">p:<span style="background:yellow;">SchemaMethod</span></span><span style="font-size:10pt;font-family:\"Courier New\";color:blue;"> </span><span style="font-size:10pt;font-family:\"Courier New\";color:red;">Name</span><span style="font-size:10pt;font-family:\"Courier New\";color:blue;">=</span><span style="font-size:10pt;font-family:\"Courier New\";">&quot;<span style="color:blue;">SendEmail</span>&quot;<span style="color:blue;">&gt;</span></span></p>
<p class="MsoNormal" style="margin-left:36pt;"><span style="font-size:10pt;font-family:\"Courier New\";color:blue;">&nbsp;&nbsp;&nbsp; &lt;</span><span style="font-size:10pt;font-family:\"Courier New\";color:#A31515;">p:Signature</span><span style="font-size:10pt;font-family:\"Courier New\";color:blue;"> </span><span style="font-size:10pt;font-family:\"Courier New\";color:red;">ReturnType</span><span style="font-size:10pt;font-family:\"Courier New\";color:blue;">=</span><span style="font-size:10pt;font-family:\"Courier New\";">&quot;<span style="color:blue;">p:Boolean</span>&quot;<span style="color:blue;"> /&gt;</span></span></p>
<p class="MsoNormal" style="margin-left:36pt;"><span style="font-size:10pt;font-family:\"Courier New\";color:blue;">&nbsp; &lt;/</span><span style="font-size:10pt;font-family:\"Courier New\";color:#A31515;">p:SchemaMethod</span><span style="font-size:10pt;font-family:\"Courier New\";color:blue;">&gt;</span></p>
<p class="MsoNormal" style="margin-left:36pt;"><span style="font-size:10pt;font-family:\"Courier New\";color:blue;">&nbsp; &lt;</span><span style="font-size:10pt;font-family:\"Courier New\";color:#A31515;">p:<span style="background:yellow;">SchemaEvent</span></span><span style="font-size:10pt;font-family:\"Courier New\";color:blue;"> </span><span style="font-size:10pt;font-family:\"Courier New\";color:red;">Name</span><span style="font-size:10pt;font-family:\"Courier New\";color:blue;">=</span><span style="font-size:10pt;font-family:\"Courier New\";">&quot;<span style="color:blue;">NewMessage</span>&quot;<span style="color:blue;">&gt;</span></span></p>
<p class="MsoNormal" style="margin-left:36pt;"><span style="font-size:10pt;font-family:\"Courier New\";color:blue;">&nbsp;&nbsp;&nbsp; &lt;</span><span style="font-size:10pt;font-family:\"Courier New\";color:#A31515;">p:SchemaEvent.Signature</span><span style="font-size:10pt;font-family:\"Courier New\";color:blue;">&gt;</span></p>
<p class="MsoNormal" style="margin-left:36pt;"><span style="font-size:10pt;font-family:\"Courier New\";color:blue;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;</span><span style="font-size:10pt;font-family:\"Courier New\";color:#A31515;">p:Signature</span><span style="font-size:10pt;font-family:\"Courier New\";color:blue;"> </span><span style="font-size:10pt;font-family:\"Courier New\";color:red;">ReturnType</span><span style="font-size:10pt;font-family:\"Courier New\";color:blue;">=</span><span style="font-size:10pt;font-family:\"Courier New\";">&quot;<span style="color:blue;">{x:Null}</span>&quot;<span style="color:blue;">&gt;</span></span></p>
<p class="MsoNormal" style="margin-left:36pt;"><span style="font-size:10pt;font-family:\"Courier New\";color:blue;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;</span><span style="font-size:10pt;font-family:\"Courier New\";color:#A31515;">p:SignatureParameter</span><span style="font-size:10pt;font-family:\"Courier New\";color:blue;"> </span><span style="font-size:10pt;font-family:\"Courier New\";color:red;">Direction</span><span style="font-size:10pt;font-family:\"Courier New\";color:blue;">=</span><span style="font-size:10pt;font-family:\"Courier New\";">&quot;<span style="color:blue;">In</span>&quot;<span style="color:blue;"> </span><span style="color:red;">Name</span><span style="color:blue;">=</span>&quot;<span style="color:blue;">sender</span>&quot;<span style="color:blue;"> </span><span style="color:red;">Type</span><span style="color:blue;">=</span>&quot;<span style="color:blue;">p:Object</span>&quot;<span style="color:blue;"> /&gt;</span></span></p>
<p class="MsoNormal" style="margin-left:36pt;"><span style="font-size:10pt;font-family:\"Courier New\";color:blue;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;</span><span style="font-size:10pt;font-family:\"Courier New\";color:#A31515;">p:SignatureParameter</span><span style="font-size:10pt;font-family:\"Courier New\";color:blue;"> </span><span style="font-size:10pt;font-family:\"Courier New\";color:red;">Direction</span><span style="font-size:10pt;font-family:\"Courier New\";color:blue;">=</span><span style="font-size:10pt;font-family:\"Courier New\";">&quot;<span style="color:blue;">In</span>&quot;<span style="color:blue;"> </span><span style="color:red;">Name</span><span style="color:blue;">=</span>&quot;<span style="color:blue;">e</span>&quot;<span style="color:blue;"> </span><span style="color:red;">Type</span><span style="color:blue;">=</span>&quot;<span style="color:blue;">s:EventArgs</span>&quot;<span style="color:blue;"> /&gt;</span></span></p>
<p class="MsoNormal" style="margin-left:36pt;"><span style="font-size:10pt;font-family:\"Courier New\";color:blue;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/</span><span style="font-size:10pt;font-family:\"Courier New\";color:#A31515;">p:Signature</span><span style="font-size:10pt;font-family:\"Courier New\";color:blue;">&gt;</span></p>
<p class="MsoNormal" style="margin-left:36pt;"><span style="font-size:10pt;font-family:\"Courier New\";color:blue;">&nbsp;&nbsp;&nbsp; &lt;/</span><span style="font-size:10pt;font-family:\"Courier New\";color:#A31515;">p:SchemaEvent.Signature</span><span style="font-size:10pt;font-family:\"Courier New\";color:blue;">&gt;</span></p>
<p class="MsoNormal" style="margin-left:36pt;"><span style="font-size:10pt;font-family:\"Courier New\";color:blue;">&nbsp; &lt;/</span><span style="font-size:10pt;font-family:\"Courier New\";color:#A31515;">p:SchemaEvent</span><span style="font-size:10pt;font-family:\"Courier New\";color:blue;">&gt;</span></p>
<p class="MsoNormal" style="margin-left:36pt;"><span style="font-size:10pt;font-family:\"Courier New\";color:blue;">&lt;/</span><span style="font-size:10pt;font-family:\"Courier New\";color:#A31515;">p:SchemaType</span><span style="font-size:10pt;font-family:\"Courier New\";color:blue;">&gt;</span></p>
<p class="MsoNormal">&nbsp;</p>
<p class="MsoNormal">The <b>SchemaType</b> object on line 2 has an attached property which link it back to the type from which this object was generated. </p>
<p class="MsoNormal">This exactly same language is used to declare arguments/data flow when defining workflow/activities in XAML. Schema language provided the solution to construct new types in XAML without falling back to code which was one of major hurdle in &nbsp;the authoring of &nbsp;XAML only workflows in V1.</p>
<p class="MsoNormal">&nbsp;</p>
</p></div>
