---
layout: post
title: Per Endpoint UserName Authentication
date: 2008-02-15 16:52:59.000000000 +05:00
type: post
published: true
status: publish
categories:
- WCF
tags: []
meta:
  _edit_last: '13661190'
  _oembed_73d2860931574c5aff6a8e26e2015b3b: '{{unknown}}'
  _oembed_5fd16e7fb16326ed9a54d819538daf0b: '{{unknown}}'
author:
  login: zamd
  email: zulfiqar.ahmed@gmail.com
  display_name: zamd
  first_name: ''
  last_name: ''
---
<div class="Section1">
<p class="MsoNormal">In this post I will explain an extensibility mechanism to support multiple userName/password validation modes in the same service.&nbsp;</p>
<p class="MsoNormal">When you use UserName authentication in WCF there are couple of different mode for the actual UserName/Password validation. These modes are: </p>
<p class="MsoListParagraph" style="margin-left:.75in;text-indent:-.25in;"><span style="font-family:Symbol;"><span>·<span style="font:7pt 'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><b><i>Windows</i></b>: Credentials are verified against a windows account (either local or domain). </p>
<p class="MsoListParagraph" style="margin-left:.75in;text-indent:-.25in;"><span style="font-family:Symbol;"><span>·<span style="font:7pt 'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><b><i>Custom</i></b>: Credentials are verified by calling your custom UserNamePasswordValidator component. </p>
<p class="MsoListParagraph" style="margin-left:.75in;text-indent:-.25in;"><span style="font-family:Symbol;"><span>·<span style="font:7pt 'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><b><i>Membership</i></b>: Credentials are verified by using SqlMembershipProvider.</p>
<p class="MsoNormal">You can configure <i>userName authentication</i> and the actual validation mode using the following service behavior: </p>
<p class="MsoNormal" style="margin-left:.5in;"><span style="font-size:12pt;color:blue;font-family:'Courier New';">&lt;</span><span style="font-size:12pt;color:#a31515;font-family:'Courier New';">serviceCredentials</span><span style="font-size:12pt;color:blue;font-family:'Courier New';">&gt;</span></p>
<p class="MsoNormal" style="margin-left:.5in;"><span style="font-size:12pt;color:blue;font-family:'Courier New';">&nbsp; &lt;</span><span style="font-size:12pt;color:#a31515;font-family:'Courier New';">serviceCertificate</span><span style="font-size:12pt;color:blue;font-family:'Courier New';"> </span><span style="font-size:12pt;color:red;font-family:'Courier New';">findValue</span><span style="font-size:12pt;color:blue;font-family:'Courier New';">=</span><span style="font-size:12pt;font-family:'Courier New';">"<span style="color:blue;">01 0a 27</span>"<span style="color:blue;"> </span><span style="color:red;">storeName</span><span style="color:blue;">=</span>"<span style="color:blue;">My</span>"<span style="color:blue;"> </span><span style="color:red;">x509FindType</span><span style="color:blue;">=</span>"<span style="color:blue;">FindByThumbprint</span>"<span style="color:blue;">/&gt;</span></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><span style="font-size:12pt;color:blue;font-family:'Courier New';">&nbsp; &lt;</span><span style="font-size:12pt;color:#a31515;font-family:'Courier New';">userNameAuthentication</span><span style="font-size:12pt;color:blue;font-family:'Courier New';"> </span><span style="font-size:12pt;color:red;font-family:'Courier New';">userNamePasswordValidationMode</span><span style="font-size:12pt;color:blue;font-family:'Courier New';">=</span><span style="font-size:12pt;font-family:'Courier New';">"<span style="color:blue;">Custom</span>"</span></p>
<p class="MsoNormal" style="margin-left:.5in;"><span style="font-size:12pt;color:blue;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:12pt;color:red;font-family:'Courier New';">customUserNamePasswordValidatorType</span><span style="font-size:12pt;color:blue;font-family:'Courier New';">=</span><span style="font-size:12pt;font-family:'Courier New';">"<span style="color:blue;">UserNameValidationSamples</span>"<span style="color:blue;">/&gt;</span></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><span style="font-size:12pt;color:blue;font-family:'Courier New';">&lt;/</span><span style="font-size:12pt;color:#a31515;font-family:'Courier New';">serviceCredentials</span><span style="font-size:12pt;color:blue;font-family:'Courier New';">&gt;</span></p>
<p class="MsoNormal">Using this behavior however will results in the same validation mode (custom in above case) being used for all the endpoints. Sometimes there is a requirement to support different mode of UserName/Password validation for different endpoints belonging to the same service. Out of the box WCF doesn't provide this functionality so I have created a custom endpoint behavior and a behavior extension to achieve this functionality. </p>
<p class="MsoNormal">The implementation of my custom behavior clones the ServiceCredentials behavior and overrides the value of userNamePasswordValidationMode with the endpoint's mode value. </p>
<p class="MsoNormal" style="margin-left:.5in;"><span style="font-size:12pt;color:blue;font-family:'Courier New';">namespace</span><b><span style="font-size:12pt;font-family:'Courier New';"> UserNameValidationSample</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">{</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp; </span></b><span style="font-size:12pt;color:green;font-family:'Courier New';">//behavior configuration extension element</span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp; </span></b><span style="font-size:12pt;color:blue;font-family:'Courier New';">public</span><b><span style="font-size:12pt;font-family:'Courier New';"> </span></b><span style="font-size:12pt;color:blue;font-family:'Courier New';">class</span><b><span style="font-size:12pt;font-family:'Courier New';"> </span></b><span style="font-size:12pt;color:#2b91af;font-family:'Courier New';">UserNameValidationBehaviorElement</span><b><span style="font-size:12pt;font-family:'Courier New';"> : BehaviorExtensionElement</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp; {</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b><span style="font-size:12pt;color:blue;font-family:'Courier New';">public</span><b><span style="font-size:12pt;font-family:'Courier New';"> UserNameValidationBehaviorElement()</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b><span style="font-size:12pt;color:blue;font-family:'Courier New';">public</span><b><span style="font-size:12pt;font-family:'Courier New';"> </span></b><span style="font-size:12pt;color:blue;font-family:'Courier New';">override</span><b><span style="font-size:12pt;font-family:'Courier New';"> </span></b><span style="font-size:12pt;color:#2b91af;font-family:'Courier New';">Type</span><b><span style="font-size:12pt;font-family:'Courier New';"> BehaviorType</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b><span style="font-size:12pt;color:blue;font-family:'Courier New';">get</span><b><span style="font-size:12pt;font-family:'Courier New';"> { </span></b><span style="font-size:12pt;color:blue;font-family:'Courier New';">return</span><b><span style="font-size:12pt;font-family:'Courier New';"> </span></b><span style="font-size:12pt;color:blue;font-family:'Courier New';">typeof</span><b><span style="font-size:12pt;font-family:'Courier New';">(</span></b><span style="font-size:12pt;color:#2b91af;font-family:'Courier New';">UserNameValidationBehavior</span><b><span style="font-size:12pt;font-family:'Courier New';">); }</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b><span style="font-size:12pt;color:blue;font-family:'Courier New';">protected</span><b><span style="font-size:12pt;font-family:'Courier New';"> </span></b><span style="font-size:12pt;color:blue;font-family:'Courier New';">override</span><b><span style="font-size:12pt;font-family:'Courier New';"> </span></b><span style="font-size:12pt;color:blue;font-family:'Courier New';">object</span><b><span style="font-size:12pt;font-family:'Courier New';"> CreateBehavior()</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b><span style="font-size:12pt;color:blue;font-family:'Courier New';">return</span><b><span style="font-size:12pt;font-family:'Courier New';"> </span></b><span style="font-size:12pt;color:blue;font-family:'Courier New';">new</span><b><span style="font-size:12pt;font-family:'Courier New';"> </span></b><span style="font-size:12pt;color:#2b91af;font-family:'Courier New';">UserNameValidationBehavior</span><b><span style="font-size:12pt;font-family:'Courier New';">(</span></b><span style="font-size:12pt;color:blue;font-family:'Courier New';">this</span><span style="font-size:12pt;font-family:'Courier New';">.Mode);</span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [ConfigurationProperty(</span></b><span style="font-size:12pt;color:#a31515;font-family:'Courier New';">"mode"</span><b><span style="font-size:12pt;font-family:'Courier New';">)]</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b><span style="font-size:12pt;color:blue;font-family:'Courier New';">public</span><b><span style="font-size:12pt;font-family:'Courier New';"> UserNamePasswordValidationMode Mode</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b><span style="font-size:12pt;color:blue;font-family:'Courier New';">get</span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b><span style="font-size:12pt;color:blue;font-family:'Courier New';">return</span><b><span style="font-size:12pt;font-family:'Courier New';"> (UserNamePasswordValidationMode)</span></b><span style="font-size:12pt;color:blue;font-family:'Courier New';">base</span><b><span style="font-size:12pt;font-family:'Courier New';">[</span></b><span style="font-size:12pt;color:#a31515;font-family:'Courier New';">"mode"</span><b><span style="font-size:12pt;font-family:'Courier New';">];</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b><span style="font-size:12pt;color:blue;font-family:'Courier New';">set</span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b><span style="font-size:12pt;color:blue;font-family:'Courier New';">base</span><b><span style="font-size:12pt;font-family:'Courier New';">[</span></b><span style="font-size:12pt;color:#a31515;font-family:'Courier New';">"mode"</span><b><span style="font-size:12pt;font-family:'Courier New';">] = </span></b><span style="font-size:12pt;color:blue;font-family:'Courier New';">value</span><b><span style="font-size:12pt;font-family:'Courier New';">;</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ConfigurationPropertyCollection properties = </span></b><span style="font-size:12pt;color:blue;font-family:'Courier New';">null</span><b><span style="font-size:12pt;font-family:'Courier New';">;</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b><span style="font-size:12pt;color:blue;font-family:'Courier New';">protected</span><b><span style="font-size:12pt;font-family:'Courier New';"> </span></b><span style="font-size:12pt;color:blue;font-family:'Courier New';">override</span><b><span style="font-size:12pt;font-family:'Courier New';"> ConfigurationPropertyCollection Properties</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b><span style="font-size:12pt;color:blue;font-family:'Courier New';">get</span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b><span style="font-size:12pt;color:blue;font-family:'Courier New';">if</span><b><span style="font-size:12pt;font-family:'Courier New';"> (</span></b><span style="font-size:12pt;color:blue;font-family:'Courier New';">this</span><span style="font-size:12pt;font-family:'Courier New';">.properties == <span style="color:blue;">null</span><b>)</b></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ConfigurationPropertyCollection propertys = </span></b><span style="font-size:12pt;color:blue;font-family:'Courier New';">new</span><b><span style="font-size:12pt;font-family:'Courier New';"> ConfigurationPropertyCollection();</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; propertys.Add(</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b><span style="font-size:12pt;color:blue;font-family:'Courier New';">new</span><b><span style="font-size:12pt;font-family:'Courier New';"> ConfigurationProperty(</span></b><span style="font-size:12pt;color:#a31515;font-family:'Courier New';">"mode"</span><b><span style="font-size:12pt;font-family:'Courier New';">, </span></b><span style="font-size:12pt;color:blue;font-family:'Courier New';">typeof</span><b><span style="font-size:12pt;font-family:'Courier New';">(UserNamePasswordValidationMode), </span></b><span style="font-size:12pt;color:blue;font-family:'Courier New';">null</span><b><span style="font-size:12pt;font-family:'Courier New';">,</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ConfigurationPropertyO</span></b><span style="font-size:12pt;font-family:'Courier New';">ptions.IsRequired));</span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b><span style="font-size:12pt;color:blue;font-family:'Courier New';">this</span><span style="font-size:12pt;font-family:'Courier New';">.properties = propertys;</span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b><span style="font-size:12pt;color:blue;font-family:'Courier New';">return</span><b><span style="font-size:12pt;font-family:'Courier New';"> </span></b><span style="font-size:12pt;color:blue;font-family:'Courier New';">this</span><span style="font-size:12pt;font-family:'Courier New';">.properties;</span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;</span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp; }</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp; </span></b><span style="font-size:12pt;color:blue;font-family:'Courier New';">public</span><b><span style="font-size:12pt;font-family:'Courier New';"> </span></b><span style="font-size:12pt;color:blue;font-family:'Courier New';">class</span><b><span style="font-size:12pt;font-family:'Courier New';"> </span></b><span style="font-size:12pt;color:#2b91af;font-family:'Courier New';">UserNameValidationBehavior</span><b><span style="font-size:12pt;font-family:'Courier New';"> : IEndpointBehavior</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp; {</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; UserNamePasswordValidationMode mode;</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b><span style="font-size:12pt;color:blue;font-family:'Courier New';">public</span><b><span style="font-size:12pt;font-family:'Courier New';"> UserNameValidationBehavior(UserNamePasswordValidationMode mode)</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mode = mode;</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><span style="font-size:12pt;color:blue;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #region</span><b><span style="font-size:12pt;font-family:'Courier New';"> IEndpointBehavior Members</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><span style="font-size:12pt;font-family:'Courier New';">&nbsp;</span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b><span style="font-size:12pt;color:blue;font-family:'Courier New';">public</span><b><span style="font-size:12pt;font-family:'Courier New';"> </span></b><span style="font-size:12pt;color:blue;font-family:'Courier New';">void</span><b><span style="font-size:12pt;font-family:'Courier New';"> AddBindingParameters(ServiceEndpoint endpoint,</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.ServiceModel.Channels.</span></b><span style="font-size:12pt;color:#2b91af;font-family:'Courier New';">BindingParameterCollection</span><b><span style="font-size:12pt;font-family:'Courier New';"> bindingParameters)</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b><span style="font-size:12pt;color:green;font-family:'Courier New';">// override the validation mode for this endpoint.</span><span style="font-size:12pt;color:green;font-family:'Courier New';">&nbsp;</span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b><span style="font-size:12pt;color:blue;font-family:'Courier New';">var</span><b><span style="font-size:12pt;font-family:'Courier New';"> sc = bindingParameters.Remove&lt;ServiceCredentials&gt;();</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b><span style="font-size:12pt;color:blue;font-family:'Courier New';">if</span><b><span style="font-size:12pt;font-family:'Courier New';"> (sc != </span></b><span style="font-size:12pt;color:blue;font-family:'Courier New';">null</span><b><span style="font-size:12pt;font-family:'Courier New';">)</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b><span style="font-size:12pt;color:blue;font-family:'Courier New';">var</span><b><span style="font-size:12pt;font-family:'Courier New';"> scCopy = sc.Clone();</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; scCopy.UserNameAuthentication.UserNamePasswordValidationMode = mode;</span></b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;</span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bindingParameters.Add(scCopy);</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;</span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b><span style="font-size:12pt;color:blue;font-family:'Courier New';">public</span><b><span style="font-size:12pt;font-family:'Courier New';"> </span></b><span style="font-size:12pt;color:blue;font-family:'Courier New';">void</span><b><span style="font-size:12pt;font-family:'Courier New';"> ApplyClientBehavior(ServiceEndpoint endpoint,</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.ServiceModel.Dispatcher.</span></b><span style="font-size:12pt;color:#2b91af;font-family:'Courier New';">ClientRuntime</span><b><span style="font-size:12pt;font-family:'Courier New';"> clientRuntime)</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></b><b><span style="font-size:12pt;font-family:'Courier New';">}</span></b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;</span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b><span style="font-size:12pt;color:blue;font-family:'Courier New';">public</span><b><span style="font-size:12pt;font-family:'Courier New';"> </span></b><span style="font-size:12pt;color:blue;font-family:'Courier New';">void</span><b><span style="font-size:12pt;font-family:'Courier New';"> ApplyDispatchBehavior(ServiceEndpoint endpoint,</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.ServiceModel.Dispatcher.</span></b><span style="font-size:12pt;color:#2b91af;font-family:'Courier New';">EndpointDispatcher</span><b><span style="font-size:12pt;font-family:'Courier New';"> endpointDispatcher)</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></b><b><span style="font-size:12pt;font-family:'Courier New';">}</span></b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;</span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b><span style="font-size:12pt;color:blue;font-family:'Courier New';">public</span><b><span style="font-size:12pt;font-family:'Courier New';"> </span></b><span style="font-size:12pt;color:blue;font-family:'Courier New';">void</span><b><span style="font-size:12pt;font-family:'Courier New';"> Validate(ServiceEndpoint endpoint)</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></b><b><span style="font-size:12pt;font-family:'Courier New';">}</span></b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;</span></p>
<p class="MsoNormal" style="margin-left:.5in;"><span style="font-size:12pt;color:blue;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #endregion</span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">&nbsp;&nbsp;&nbsp; }</span></b><span style="font-size:12pt;font-family:'Courier New';"></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><b><span style="font-size:12pt;font-family:'Courier New';">}</span></b></p>
<p class="MsoNormal">This is how you define and use a the behavior from config file:</p>
<p class="MsoNormal" style="margin-left:.5in;"><span style="font-size:12pt;color:blue;font-family:'Courier New';">&lt;</span><span style="font-size:12pt;color:#a31515;font-family:'Courier New';">system.serviceModel</span><span style="font-size:12pt;color:blue;font-family:'Courier New';">&gt;</span></p>
<p class="MsoNormal" style="margin-left:.5in;"><span style="font-size:12pt;color:blue;font-family:'Courier New';">&nbsp; &lt;</span><span style="font-size:12pt;color:#a31515;font-family:'Courier New';">services</span><span style="font-size:12pt;color:blue;font-family:'Courier New';">&gt;</span></p>
<p class="MsoNormal" style="margin-left:.5in;"><span style="font-size:12pt;color:blue;font-family:'Courier New';">&nbsp;&nbsp;&nbsp; &lt;</span><span style="font-size:12pt;color:#a31515;font-family:'Courier New';">service</span><span style="font-size:12pt;color:blue;font-family:'Courier New';"> </span><span style="font-size:12pt;color:red;font-family:'Courier New';">name</span><span style="font-size:12pt;color:blue;font-family:'Courier New';">=</span><span style="font-size:12pt;font-family:'Courier New';">"<span style="color:blue;">UserNameValidationSamples.CalculatorService</span>"<span style="color:blue;"> </span><span style="color:red;">behaviorConfiguration</span><span style="color:blue;">=</span>"<span style="color:blue;">credBehavior</span>"<span style="color:blue;">&gt;</span></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><span style="font-size:12pt;color:blue;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;</span><span style="font-size:12pt;color:#a31515;font-family:'Courier New';">endpoint</span><span style="font-size:12pt;color:blue;font-family:'Courier New';"> </span><span style="font-size:12pt;color:red;font-family:'Courier New';">address</span><span style="font-size:12pt;color:blue;font-family:'Courier New';">=</span><span style="font-size:12pt;font-family:'Courier New';">"<span style="color:blue;">http://localhost:8080/CalculatorService/Custom</span>"</span></p>
<p class="MsoNormal" style="margin-left:.5in;"><span style="font-size:12pt;color:blue;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:12pt;color:red;font-family:'Courier New';">binding</span><span style="font-size:12pt;color:blue;font-family:'Courier New';">=</span><span style="font-size:12pt;font-family:'Courier New';">"<span style="color:blue;">wsHttpBinding</span>"</span></p>
<p class="MsoNormal" style="margin-left:.5in;"><span style="font-size:12pt;color:blue;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:12pt;color:red;font-family:'Courier New';">bindingConfiguration</span><span style="font-size:12pt;color:blue;font-family:'Courier New';">=</span><span style="font-size:12pt;font-family:'Courier New';">"<span style="color:blue;">noSecureConversation</span>"</span></p>
<p class="MsoNormal" style="margin-left:.5in;"><span style="font-size:12pt;color:blue;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:12pt;color:red;font-family:'Courier New';">contract</span><span style="font-size:12pt;color:blue;font-family:'Courier New';">=</span><span style="font-size:12pt;font-family:'Courier New';">"<span style="color:blue;">UserNameValidationSamples.ICalculatorService</span>"</span></p>
<p class="MsoNormal" style="margin-left:.5in;"><span style="font-size:12pt;color:blue;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:12pt;color:red;font-family:'Courier New';">behaviorConfiguration</span><span style="font-size:12pt;color:blue;font-family:'Courier New';">=</span><span style="font-size:12pt;font-family:'Courier New';">"<span style="color:blue;">customValidation</span>"</span></p>
<p class="MsoNormal" style="margin-left:.5in;"><span style="font-size:12pt;color:blue;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /&gt;</span></p>
<p class="MsoNormal" style="margin-left:.5in;"><span style="font-size:12pt;color:blue;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;</span><span style="font-size:12pt;color:#a31515;font-family:'Courier New';">endpoint</span><span style="font-size:12pt;color:blue;font-family:'Courier New';"> </span><span style="font-size:12pt;color:red;font-family:'Courier New';">address</span><span style="font-size:12pt;color:blue;font-family:'Courier New';">=</span><span style="font-size:12pt;font-family:'Courier New';">"<span style="color:blue;">http://localhost:8080/CalculatorService/Windows</span>"</span></p>
<p class="MsoNormal" style="margin-left:.5in;"><span style="font-size:12pt;color:blue;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:12pt;color:red;font-family:'Courier New';">binding</span><span style="font-size:12pt;color:blue;font-family:'Courier New';">=</span><span style="font-size:12pt;font-family:'Courier New';">"<span style="color:blue;">wsHttpBinding</span>"</span></p>
<p class="MsoNormal" style="margin-left:.5in;"><span style="font-size:12pt;color:blue;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:12pt;color:red;font-family:'Courier New';">bindingConfiguration</span><span style="font-size:12pt;color:blue;font-family:'Courier New';">=</span><span style="font-size:12pt;font-family:'Courier New';">"<span style="color:blue;">noSecureConversation</span>"</span></p>
<p class="MsoNormal" style="margin-left:.5in;"><span style="font-size:12pt;color:blue;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:12pt;color:red;font-family:'Courier New';">contract</span><span style="font-size:12pt;color:blue;font-family:'Courier New';">=</span><span style="font-size:12pt;font-family:'Courier New';">"<span style="color:blue;">UserNameValidationSamples.ICalculatorService</span>"</span></p>
<p class="MsoNormal" style="margin-left:.5in;"><span style="font-size:12pt;color:blue;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-size:12pt;color:red;font-family:'Courier New';">behaviorConfiguration</span><span style="font-size:12pt;color:blue;font-family:'Courier New';">=</span><span style="font-size:12pt;font-family:'Courier New';">"<span style="color:blue;">windowsValidation</span>"</span></p>
<p class="MsoNormal" style="margin-left:.5in;"><span style="font-size:12pt;color:blue;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /&gt;</span></p>
<p class="MsoNormal" style="margin-left:.5in;"><span style="font-size:12pt;color:blue;font-family:'Courier New';">&nbsp;&nbsp;&nbsp; &lt;/</span><span style="font-size:12pt;color:#a31515;font-family:'Courier New';">service</span><span style="font-size:12pt;color:blue;font-family:'Courier New';">&gt;</span></p>
<p class="MsoNormal" style="margin-left:.5in;"><span style="font-size:12pt;color:blue;font-family:'Courier New';">&nbsp; &lt;/</span><span style="font-size:12pt;color:#a31515;font-family:'Courier New';">services</span><span style="font-size:12pt;color:blue;font-family:'Courier New';">&gt;</span><span style="font-size:12pt;color:blue;font-family:'Courier New';">&nbsp;</span></p>
<p class="MsoNormal" style="margin-left:.5in;"><span style="font-size:12pt;color:blue;font-family:'Courier New';">&nbsp; &lt;</span><span style="font-size:12pt;color:#a31515;font-family:'Courier New';">behaviors</span><span style="font-size:12pt;color:blue;font-family:'Courier New';">&gt;</span></p>
<p class="MsoNormal" style="margin-left:.5in;"><span style="font-size:12pt;color:blue;font-family:'Courier New';">&nbsp;&nbsp;&nbsp; &lt;</span><span style="font-size:12pt;color:#a31515;font-family:'Courier New';">endpointBehaviors</span><span style="font-size:12pt;color:blue;font-family:'Courier New';">&gt;</span></p>
<p class="MsoNormal" style="margin-left:.5in;"><span style="font-size:12pt;color:blue;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;!--</span><span style="font-size:12pt;color:green;font-family:'Courier New';"> my custom behavior </span><span style="font-size:12pt;color:blue;font-family:'Courier New';">--&gt;</span></p>
<p class="MsoNormal" style="margin-left:.5in;"><span style="font-size:12pt;color:blue;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;</span><span style="font-size:12pt;color:#a31515;font-family:'Courier New';">behavior</span><span style="font-size:12pt;color:blue;font-family:'Courier New';"> </span><span style="font-size:12pt;color:red;font-family:'Courier New';">name</span><span style="font-size:12pt;color:blue;font-family:'Courier New';">=</span><span style="font-size:12pt;font-family:'Courier New';">"<span style="color:blue;">customValidation</span>"<span style="color:blue;">&gt;</span></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><span style="font-size:12pt;color:blue;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;</span><span style="font-size:12pt;color:#a31515;font-family:'Courier New';">userNameValidation</span><span style="font-size:12pt;color:blue;font-family:'Courier New';"> </span><span style="font-size:12pt;color:red;font-family:'Courier New';">mode</span><span style="font-size:12pt;color:blue;font-family:'Courier New';">=</span><span style="font-size:12pt;font-family:'Courier New';">"<span style="color:blue;">Custom</span>"<span style="color:blue;">/&gt;</span></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><span style="font-size:12pt;color:blue;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;!--</span><span style="font-size:12pt;color:green;font-family:'Courier New';"> Custom, Windows, Membership</span><span style="font-size:12pt;color:blue;font-family:'Courier New';">--&gt;</span></p>
<p class="MsoNormal" style="margin-left:.5in;"><span style="font-size:12pt;color:blue;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/</span><span style="font-size:12pt;color:#a31515;font-family:'Courier New';">behavior</span><span style="font-size:12pt;color:blue;font-family:'Courier New';">&gt;</span><span style="font-size:12pt;color:blue;font-family:'Courier New';">&nbsp;</span></p>
<p class="MsoNormal" style="margin-left:.5in;"><span style="font-size:12pt;color:blue;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;</span><span style="font-size:12pt;color:#a31515;font-family:'Courier New';">behavior</span><span style="font-size:12pt;color:blue;font-family:'Courier New';"> </span><span style="font-size:12pt;color:red;font-family:'Courier New';">name</span><span style="font-size:12pt;color:blue;font-family:'Courier New';">=</span><span style="font-size:12pt;font-family:'Courier New';">"<span style="color:blue;">windowsValidation</span>"<span style="color:blue;">&gt;</span></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><span style="font-size:12pt;color:blue;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;</span><span style="font-size:12pt;color:#a31515;font-family:'Courier New';">userNameValidation</span><span style="font-size:12pt;color:blue;font-family:'Courier New';"> </span><span style="font-size:12pt;color:red;font-family:'Courier New';">mode</span><span style="font-size:12pt;color:blue;font-family:'Courier New';">=</span><span style="font-size:12pt;font-family:'Courier New';">"<span style="color:blue;">Windows</span>"<span style="color:blue;">/&gt;</span></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><span style="font-size:12pt;color:blue;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;!--</span><span style="font-size:12pt;color:green;font-family:'Courier New';"> Custom, Windows, Membership</span><span style="font-size:12pt;color:blue;font-family:'Courier New';">--&gt;</span></p>
<p class="MsoNormal" style="margin-left:.5in;"><span style="font-size:12pt;color:blue;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/</span><span style="font-size:12pt;color:#a31515;font-family:'Courier New';">behavior</span><span style="font-size:12pt;color:blue;font-family:'Courier New';">&gt;</span><span style="font-size:12pt;color:blue;font-family:'Courier New';">&nbsp;</span></p>
<p class="MsoNormal" style="margin-left:.5in;"><span style="font-size:12pt;color:blue;font-family:'Courier New';">&nbsp;&nbsp;&nbsp; &lt;/</span><span style="font-size:12pt;color:#a31515;font-family:'Courier New';">endpointBehaviors</span><span style="font-size:12pt;color:blue;font-family:'Courier New';">&gt;</span></p>
<p class="MsoNormal" style="margin-left:.5in;"><span style="font-size:12pt;color:blue;font-family:'Courier New';">&nbsp; &lt;/</span><span style="font-size:12pt;color:#a31515;font-family:'Courier New';">behaviors</span><span style="font-size:12pt;color:blue;font-family:'Courier New';">&gt;</span><span style="font-size:12pt;color:blue;font-family:'Courier New';">&nbsp;</span></p>
<p class="MsoNormal" style="margin-left:.5in;"><span style="font-size:12pt;color:blue;font-family:'Courier New';">&nbsp; &lt;!--</span><span style="font-size:12pt;color:green;font-family:'Courier New';"> create a userNameValidation extension </span><span style="font-size:12pt;color:blue;font-family:'Courier New';">--&gt;</span></p>
<p class="MsoNormal" style="margin-left:.5in;"><span style="font-size:12pt;color:blue;font-family:'Courier New';">&nbsp; &lt;</span><span style="font-size:12pt;color:#a31515;font-family:'Courier New';">extensions</span><span style="font-size:12pt;color:blue;font-family:'Courier New';">&gt;</span></p>
<p class="MsoNormal" style="margin-left:.5in;"><span style="font-size:12pt;color:blue;font-family:'Courier New';">&nbsp;&nbsp;&nbsp; &lt;</span><span style="font-size:12pt;color:#a31515;font-family:'Courier New';">behaviorExtensions</span><span style="font-size:12pt;color:blue;font-family:'Courier New';">&gt;</span></p>
<p class="MsoNormal" style="margin-left:.5in;"><span style="font-size:12pt;color:blue;font-family:'Courier New';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;</span><span style="font-size:12pt;color:#a31515;font-family:'Courier New';">add</span><span style="font-size:12pt;color:blue;font-family:'Courier New';"> </span><span style="font-size:12pt;color:red;font-family:'Courier New';">name</span><span style="font-size:12pt;color:blue;font-family:'Courier New';">=</span><span style="font-size:12pt;font-family:'Courier New';">"<span style="color:blue;">userNameValidation</span>"<span style="color:blue;"> </span><span style="color:red;">type</span><span style="color:blue;">=</span>"<span style="color:blue;">UserNameValidationSamples.UserNameValidationBehaviorElement</span>"<span style="color:blue;">/&gt;</span></span></p>
<p class="MsoNormal" style="margin-left:.5in;"><span style="font-size:12pt;color:blue;font-family:'Courier New';">&nbsp;&nbsp;&nbsp; &lt;/</span><span style="font-size:12pt;color:#a31515;font-family:'Courier New';">behaviorExtensions</span><span style="font-size:12pt;color:blue;font-family:'Courier New';">&gt;</span></p>
<p class="MsoNormal" style="margin-left:.5in;"><span style="font-size:12pt;color:blue;font-family:'Courier New';">&nbsp; &lt;/</span><span style="font-size:12pt;color:#a31515;font-family:'Courier New';">extensions</span><span style="font-size:12pt;color:blue;font-family:'Courier New';">&gt;</span></p>
<p class="MsoNormal" style="margin-left:.5in;"><span style="font-size:12pt;color:blue;font-family:'Courier New';">&lt;/</span><span style="font-size:12pt;color:#a31515;font-family:'Courier New';">system.serviceModel</span><span style="font-size:12pt;color:blue;font-family:'Courier New';">&gt;</span></p>
</div>
<p>Source code of a VS2008 project is attached with this post.</p>
<p>Download: <a href="http://cid-724b6fcd63a8c1ac.skydrive.live.com/self.aspx/zamd.net/usernamesamples.zip">usernamesamples.zip</a></p>
